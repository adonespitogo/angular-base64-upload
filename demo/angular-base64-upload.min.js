/*! angular-base64-upload - v0.1.8
* https://github.com/adonespitogo/angular-base64-upload
* Copyright (c) Adones Pitogo <pitogo.adones@gmail.com> 2015;
* Licensed MIT */

!function(a,b){"use strict";a._arrayBufferToBase64=function(b){for(var c="",d=new Uint8Array(b),e=d.byteLength,f=0;e>f;f++)c+=String.fromCharCode(d[f]);return a.btoa(c)};var c=a.angular.module("naif.base64",[]);c.directive("baseSixtyFourInput",["$window","base64Converter",function(a,b){for(var c={onChange:"&",preprocessor:"&"},d=["onabort","onerror","onloadstart","onloadend","onprogress","onload"],e=d.length-1;e>=0;e--){var f=d[e];c[f]="&"}return{restrict:"A",require:"?ngModel",scope:c,link:function(c,e,f,g){function h(a,b,c,d,e){c[a]=function(a){b()(a,c,d,r,s,e)}}function i(a,d,e){return function(g){var h=g.target.result;f.preprocessor?e=c.preprocessor()(d,h):e.base64=b.getBase64String(h),s.push(e),f.onload&&c.onload()(g,a,d,r,s,e),k()}}function j(a,b,e){for(var g=d.length-1;g>=0;g--){var j=d[g];f[j]&&"onload"!==j&&h(j,c[j],a,b,e)}a.onload=i(a,b,e)}function k(){c.$apply(function(){var a=f.multiple?s:s[0];g.$setViewValue(angular.copy(a))})}function l(){for(var b=r.length-1;b>=0;b--){var c=new a.FileReader,d=r[b],e={};e.filetype=d.type,e.filename=d.name,e.filesize=d.size,j(c,d,e),c.readAsArrayBuffer(d)}}function m(a){f.onChange&&c.onChange()(a,r)}function n(a){if(f.maxnum&&f.multiple){var b=a.length<=parseInt(f.maxnum);g.$setValidity("maxnum",b)}return a}function o(a){if(f.minnum&&f.multiple){var b=a.length>=parseInt(f.minnum);g.$setValidity("minnum",b)}return a}function p(a){var b=!0;if(f.maxsize){var c=1e3*parseFloat(f.maxsize);if(f.multiple)for(var d=0;d<a.length;d++){var e=a[d];if(e.filesize>c){b=!1;break}}else b=a.filesize<=c;g.$setValidity("maxsize",b)}return a}function q(a){var b=!0,c=1e3*parseFloat(f.minsize);if(f.minsize){if(f.multiple)for(var d=0;d<a.length;d++){var e=a[d];if(e.filesize<c){b=!1;break}}else b=a.filesize>=c;g.$setValidity("minsize",b)}return a}if(g){g.$setViewValue(null);var r=[],s=[];e.on("change",function(a){a.target.files.length&&(s=[],r=a.target.files,l(),m(a))}),g.$parsers.push(n),g.$parsers.push(o),g.$parsers.push(p),g.$parsers.push(q)}}}}]),c.service("base64Converter",["$window","$q","$rootScope",function(a,b,c){this.getBase64String=function(b){return a._arrayBufferToBase64(b)},this.base64ToBlob=function(b,c){var d,e="data:"+c+";base64,"+b;d=a.atob(e.split(",")[1]);for(var f=e.split(",")[0].split(":")[1].split(";")[0],g=new Uint8Array(d.length),h=0;h<d.length;h++)g[h]=d.charCodeAt(h);return new Blob([g],{type:f})},this.getBase64Object=function(d){var e=this,f=b.defer(),g={filename:d.name,filetype:d.type,filesize:d.size,base64:null},h=new a.FileReader;return h.onload=function(a){g.base64=e.getBase64String(a.target.result),c.$apply(function(){f.resolve(g)})},h.readAsArrayBuffer(d),f.promise}}])}(this);
//# sourceMappingURL=angular-base64-upload.min.js.map